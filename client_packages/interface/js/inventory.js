var itemsData = {
    "-1": "Маска",
    "-3": "Перчатки",
    "-4": "Штаны",
    "-5": "Рюкзак",
    "-6": "Обувь",
    "-7": "Аксессуар",
    "-8": "Нижняя одежда",
    "-9": "Бронежилет",
    "-10": "Украшения",
    "-11": "Верхняя одежда",
    "-12": "Головной убор",
    "-13": "Очки",
    "-14": "Аксессуар",
    0: "Test Item",
    1: "Аптечка",
    2: "Канистра",
    3: "Чипсы",
    4: "Пиво",
    5: "Пицца",
    6: "Бургер",
    7: "Хот-Дог",
    8: "Сэндвич",
    9: "eCola",
    10: "Sprunk",
    11: "Отмычка для замков",
    12: "Сумка с деньгами",
    13: "Материалы",
    14: "Наркотики",
    15: "Сумка с дрелью",
    16: "Военная отмычка",
    17: "Мешок",
    18: "Стяжки",
    19: "Ключи от машины",
    40: "Подарок",
    41: "Связка ключей",
    42: "Балончик",
    43: "Апельсин",

    20: `"На корке лимона"`,
    21: `"На бруснике"`,
    22: `"Русский стандарт"`,
    23: `"Asahi"`,
    24: `"Midori"`,
    25: `"Yamazaki"`,
    26: `"Martini Asti"`,
    27: `"Sambuca"`,
    28: `"Campari"`,
    29: `"Дживан"`,
    30: `"Арарат"`,
    31: `"Noyan Tapan"`,

    100: "Пистолет",
    101: "Боевой пистолет",
    102: "Пистолет .50",
    103: "Пистолет SNS",
    104: "Тяжелый пистолет",
    105: "Винтажные пистолет",
    106: "Пистолет-стрелок",
    107: "Револьвер",
    108: "Пистолет AP",
    109: "Электрошокер",
    110: "Ракетница",
    111: "Двойное действие",
    112: "Пистолет MK2",
    113: "Пистолет SNS MK2",
    114: "Револьвер MK2",

    115: "Микро ПП",
    116: "Пистолет-пулемет",
    117: "ПП",
    118: "Штурмовой ПП",
    119: "Боевой PDW",
    120: "Пулемет",
    121: "Боевой Пулемет",
    122: "Автомат Томпсона",
    123: "Мини ПП",
    124: "ПП MK2",
    125: "Боевой пулемет MK2",

    126: "Штурмовая винтовка",
    127: "Карабиновая винтовка",
    128: "Продвинутая винтовка",
    129: "Специальный карабин",
    130: "Винтовка Буллпап",
    131: "Компактная винтовка",
    132: "Штурмовая винтовка MK2",
    133: "Карабиновая Винтовка MK2",
    134: "Специальный карабин MK2",
    135: "Винтовка Буллпап MK2",

    136: "Снайперская винтовка",
    137: "Тяжелая снайперская винтовка",
    138: "Стрелковая винтовка",
    139: "Тяжелая снайперская винтовка MK2",
    140: "Стрелковая винтовка MK2",

    141: "Помповый дробовик",
    142: "Обрез",
    143: "Дробовик Буллпап",
    144: "Штурмовой Дробовик",
    145: "Мушкет",
    146: "Тяжклый дробовик",
    147: "Двуствольный дробовик",
    148: "Подметальный дробовик",
    149: "Помповый дробовик MK2",
	
	150: "RPG",
	151: "Up-n-Atomizer",
	152: "Minigun",
	153: "Firework Launcher",
	154: "Railgun",
	155: "Homing Launcher",
	156: "Widowmaker",

    180: "Нож",
    181: "Дубинка",
    182: "Молоток",
    183: "Бита",
    184: "Лом",
    185: "Клюшка",
    186: "Бутылка",
    187: "Кинжал",
    188: "Топор",
    189: "Кастет",
    190: "Мачете",
    191: "Фонарик",
    192: "Швейцарский нож",
    193: "Кий",
    194: "Ключ",
    195: "Боевой топор",

    200: "Патроны 45ACP",
    201: "Патроны 9x19mm",
    202: "Патроны 62x39mm",
    203: "Патроны 12ga Rifles",
    204: "Патроны 50BMG",
	
	// Fishing
	205: "Удочка",
	206: "Улучшенная удочка",
	207: "Удочка MK2",
    208: "Наживка",
    209: "Корюшка",
    210: "Кунджа",
    211: "Лосось",
    212: "Окунь",
    213: "Осётр",
    214: "Скат",
	215: "Тунец",
	216: "Угорь",
	217: "Чёрный амур",
	218: "Щука",
	
	// AlcoShop
	219: "Martini Asti",
	220: "Sambuca",
	221: "Водка с лимоном",
	222: "Водка на бруснике",
	223: "Русский стандарт",
	224: "Коньяк Дживан",
	225: "Коньяк Арарат",
	226: "Пиво разливное",
	227: "Пиво бутылочное",
	228: "Кальян",
    
    229: "Фишки",
	
	// Repair
	250: "Рем. Комплект",
	
	251: "Бинт",
	252: "Аптечка", 
	253: "Таблетки",
	254: "Шприц адреналина",
	
	//Farm
	255: "Листья коки",
	
	//Diver
	256: "Золото",
	257: "Железяка",
	
	//New year
	258: "Снежок",
779: "Дрон",
780: "Номер",
	
	10501:	"Картофель",
	    10502:	"Морковь",
	    10503:	"Пшеница",
	    10504:	"Клевер",
	    10505:	"Молоко",
	
	    10506:	"Семена: Картофель",
	    10507:	"Семена: Морковь",
	    10508:	"Семена: Пшеница",
	    10509:	"Семена: Клевер",
		777: "Виноград",
}

Vue.component('item', {
	template: '<div :class="test"><div class="item" :title="title" :fastslot="fast_slot" :class="{active: isactive}" @click.right.prevent="select">\
    <img :src="src"><span>{{count}}</span><p class="sub">{{subdata}}</p><p class="names">{{name}}</p></div></div>',
    props: ['id', 'index', 'count', 'isactive', 'type', 'subdata', 'fast_slot'],
    data: function () {
        return {
			src: 'images/items/' + this.id + '.png',
			title: itemsData[this.id],
            name: itemsData[this.id],
			test: 'item' + this.id + 'ma',
			
        }
    },
    methods: {
        select: function (event) {
			board.selectFastSlot = !1;
            board.sType = (this.type == 'inv') ? 1 : (this.type == 'out') ? 0 : 2 ;
            board.sID = this.id;
            board.sIndex = this.index;
            context.type = (this.type == 'inv') ? 1 : (this.type == 'out') ? 0 : 2 ;
			context.fastSlot = this.fast_slot;
			if (board.items[board.sIndex][0] > 99 && board.items[board.sIndex][0] < 196) 
			{
				context.act = true;
			}
			else
			{
				context.act = false;
			}
        }
    }
})

var board = new Vue({
    el: ".board",
    data: {
        active: false,
        outside: false,
		text: ["Наличные","Банк", "Уровень", "EXP", "Телефон", "Статус", "Баны", "Варны", "Лицензии", "Номер паспорта", "Номер счета", "Фракция", "Ранг", "Сытость", "Жажда", "Супруг(а)", "Работа", "Уровень работы","Передать/Переложить","Отыграно"],
		outType: 0,
        outHead: "Внешний",
        stats: [1, 2, "88005553535", "Admin", 0, 0, "123456789$", "987654321$", "", 9999999, 9999999, 100, 100],
        items: [ [100, 1, 0],[1, 5, 1],[5, 10, 0],[-4, 1, 0],[11, 3, 0],[12, 3, 0],[13, 3, 0],[14, 3, 0],[15, 3, 0],[16, 3, 0],[17, 3, 0],[18, 3, 0],[19, 3, 0]],
		money: 0,
		donate: 228,
		bank: 1337,
        outitems: [ ],
        sIndex: 0,
        sType: 0,
        sID: 0,
		key: 0,
		keys: 0,
		sFastSlot: -1,
		safeindex: [-1,-1,-1,-1,-1],
		selectFastSlot: false,
		savedFast: [undefined, undefined, undefined, undefined, undefined],
		arraymax: 0
		
    },
    methods: {
        context: function (event) {
            if (clickInsideElement(event, 'item')) {
                context.show(event.pageX, event.pageY)
            } else {
                context.hide()
            }
        },
        hide: function (event) {
            context.hide()
        },
		 
        outSet: function (json) {
			// savedFast[0][0] != item[0] && savedFast[0][1] != item[1] && savedFast[1][0] != item[0] && savedFast[1][1] != item[1] && savedFast[2][0] != item[0] && savedFast[2][1] != item[1] && savedFast[3][0] != item[0] && savedFast[3][1] != item[1] && savedFast[4][0] != item[0] && savedFast[4][1] != item[1]
            this.key++
            this.outType = json[0]
            this.outHead = json[1]
            this.outitems = json[2]
        },
        itemsSet: function (json) {
            this.key++
            this.items = json
			
			this.keys = 0;
			for (let i = 0; i < this.savedFast.length; i++)
			{
				if (this.savedFast[i] != undefined)
					this.keys += 1;
			}
			
			let keys = 0;
			this.safeindex = [-1,-1,-1,-1,-1];
			
			for (let i = 0; i < this.items.length; i++)
			{
				var item = this.items[i]
				for (let t = 0; t < 6; t++)
				{
					if (this.savedFast[t] != undefined && item[0] == this.savedFast[t][0] && item[1] == this.savedFast[t][1] )
					{
						this.safeindex[t] = i;
					}
				}
				
			}
			
			for(let i = 0; i < this.safeindex.length; i++)
			{
				if (this.safeindex[i] != -1)
				{
					mp.trigger("bind", this.safeindex[i], i);
				}
			}
			
			
			if (keys != this.keys)
			{
				for (let i = 0; i < this.savedFast.length; i++)
				{
					var find = false;
					for (let t = 0; t < this.items.length; t++)
					{
						if (this.items[t][0] == this.savedFast[i][0] && this.items[t][1] == this.savedFast[i][1])
							find = true;
					}
					if (!find)
					{
						this.savedFast.splice(i, 1);
						this.savedFast[i] = undefined;
					}
				}
			}
			
        },
        itemUpd: function (index, data) {
            this.key++
            this.items[index] = data
			
        },
        send: function (id) {
            let type = (this.sType) ? 0 : this.outType
            mp.trigger('boardCB', id, type, this.sIndex)
        },
		useFastSlot: function(t) 
		{
			if (this.items[this.sIndex][0] > 99 && this.items[this.sIndex][0] < 196 || this.items[this.sIndex][0] == 258){
            this.savedFast[t] = this.items[this.sIndex] ,this.selectFastSlot = false, this.sFastSlot = t, mp.trigger("bind", this.sIndex, this.sFastSlot)
			}
        },
        unsetFastSlot: function() {
            let t = this.items[this.sIndex];
			let id = 0;
			for (let i = 0; i < this.savedFast.length; i++)
			{
				if (this.savedFast[i] != undefined && this.savedFast[i][0] == t[0] && this.savedFast[i][1] == t[1])
					id = i;
			}
            this.savedFast[id] = undefined; 
			this.key++;
			mp.trigger("unbind", id);
        }
    }
})
var context = new Vue({
    el: ".context_menu",
    data: {
		men: ["Использовать", "Передать", "Взять", "Выбросить", "Быстрый слот", "Убрать"],
        active: false,
        style: '',
        type: 0,
		act: false,
		fastSlot: -1
    },
    methods: {
        show: function (x, y) {
            this.style = `left:${x}px;top:${y}px;`
            this.active = true
        },
        hide: function () {
            this.active = false
        },
		setFastSlot: function() {
            this.hide(), board.selectFastSlot = true
        },
        unsetFastSlot: function() {
            this.hide(), board.unsetFastSlot()
        },
        btn: function (id) {
			if (id == 5)
			{
				this.setFastSlot();
				return;
			}
			if (id == 6)
			{
				this.unsetFastSlot();
				return;
			}
            this.hide()
            board.send(id)
        }
    }
})
function clickInsideElement(e, className) {
    var el = e.srcElement || e.target;
    if (el.classList.contains(className)) {
        return el;
    } else {
        while (el = el.parentNode) {
            if (el.classList && el.classList.contains(className)) {
                return el;
            }
        }
    }
    return false;
}